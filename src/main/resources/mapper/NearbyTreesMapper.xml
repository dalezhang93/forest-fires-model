<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

    <mapper namespace="com.example.forestfires.dao.mapper.NearbyTreesMapper">
      <insert id="batchInsertNearbyTrees">
        insert into nearbytrees(treeid,nearbytreeid,distance,angle,slope) values
        (#{tree.treeID}, #{tree.nearbyTreeID},#{tree.distince}, #{tree.angle}, #{tree.slope})
      </insert>

      <delete id="cleanNearbyTreesTable">
        delete from nearbytrees
      </delete>

      <update id="updateNearbyTreeStatus">
          update nearbytrees set nearbytree_status = #{status} where nearbytreeid=#{nearbytreeid}
      </update>


      <select id="possibleFireTrees">
          select b.treeid,b.nearbytreeid,b.distance,b.angle,b.slope,b.nearbytree_status
          from nearbytrees a inner join nearbytrees b
          on a.treeid = b.treeid
          inner join trees t on b.treeid = t.treeid
          where a.nearbytree_status=1 and t.status=0
          order by b.treeid,b.nearbytreeid
      </select>
    </mapper>
